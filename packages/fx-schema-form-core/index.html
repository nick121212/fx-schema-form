<!DOCTYPE html>
<html lang="en">

<head>
    <title>测试侧面</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">


    <script src="node_modules/ajv/dist/ajv.min.js"></script>
    <script src="./dist/index.dev.js"></script>
</head>

<body>
    <script>
        var jsonschema = {
            "$schema": "http://json-schema.org/draft-06/schema#",
            "$ref": "#/definitions/Pokedex",
            "$id": "testdef",
            "definitions": {
                "Pokedex": {
                    "type": "object",
                    "additionalProperties": false,
                    "properties": {
                        "pokemon": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/Pokemon"
                            }
                        }
                    },
                    "required": [
                        "pokemon"
                    ],
                    "title": "Pokedex"
                },
                "Pokemon": {
                    "type": "object",
                    "additionalProperties": false,
                    "properties": {
                        "id": {
                            "type": "integer"
                        },
                        "num": {
                            "type": "string"
                        },
                        "name": {
                            "type": "string"
                        },
                        "img": {
                            "type": "string"
                        },
                        "type": {
                            "type": "array",
                            "items": {
                                "type": "string"
                            }
                        },
                        "height": {
                            "type": "string"
                        },
                        "weight": {
                            "type": "string"
                        },
                        "candy": {
                            "type": "string"
                        },
                        "candy_count": {
                            "type": "integer"
                        },
                        "egg": {
                            "$ref": "#/definitions/Egg"
                        },
                        "spawn_chance": {
                            "type": "number"
                        },
                        "avg_spawns": {
                            "type": "number"
                        },
                        "spawn_time": {
                            "type": "string"
                        },
                        "multipliers": {
                            "anyOf": [{
                                    "type": "array",
                                    "items": {
                                        "type": "number"
                                    }
                                },
                                {
                                    "type": "null"
                                }
                            ]
                        },
                        "weaknesses": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/Weakness"
                            }
                        },
                        "next_evolution": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/Evolution"
                            }
                        },
                        "prev_evolution": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/Evolution"
                            }
                        }
                    },
                    "required": [
                        "avg_spawns",
                        "candy",
                        "egg",
                        "height",
                        "id",
                        "img",
                        "multipliers",
                        "name",
                        "num",
                        "spawn_chance",
                        "spawn_time",
                        "type",
                        "weaknesses",
                        "weight"
                    ],
                    "title": "Pokemon"
                },
                "Evolution": {
                    "type": "object",
                    "additionalProperties": false,
                    "properties": {
                        "num": {
                            "type": "string"
                        },
                        "name": {
                            "type": "string"
                        }
                    },
                    "required": [
                        "name",
                        "num"
                    ],
                    "title": "Evolution"
                },
                "Egg": {
                    "type": "string",
                    "enum": [
                        "2 km",
                        "Not in Eggs",
                        "5 km",
                        "10 km",
                        "Omanyte Candy"
                    ],
                    "title": "Egg"
                },
                "Weakness": {
                    "type": "string",
                    "enum": [
                        "Fire",
                        "Ice",
                        "Flying",
                        "Psychic",
                        "Water",
                        "Ground",
                        "Rock",
                        "Electric",
                        "Grass",
                        "Fighting",
                        "Poison",
                        "Bug",
                        "Fairy",
                        "Ghost",
                        "Dark",
                        "Steel",
                        "Dragon"
                    ],
                    "title": "Weakness"
                }
            }
        }
        var ajv = new Ajv({
            extendRefs: true,
            missingRefs: true
        });
        var b = [new SFC.ResolveLib(ajv, jsonschema), new SFC.ResolveLib(ajv, {
            type: "object",
            $id: "design",
            required: [],
            properties: {
                description: {
                    type: "array",
                    title: "面板详情",
                    items: {
                        type: "string"
                    }
                }
            }
        })];

        let merge = new SFC.MergeLib(ajv, "testdef", null, ["*"]);
        let merge2 = new SFC.MergeLib(ajv, merge.mergeUiSchemaList[0].schemaPath, merge.mergeUiSchemaList[0], [
            "*"
        ]);
        let merge3 = new SFC.MergeLib(ajv, merge2.mergeUiSchemaList[0].schemaPath, merge2.mergeUiSchemaList[0], [
            "*"
        ]);

        console.log(merge3.mergeUiSchemaList);
    </script>
</body>

</html>