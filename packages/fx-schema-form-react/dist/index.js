!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("recompose"),require("immutable"),require("fx-schema-form-core"),require("react-redux"),require("resolve-pathname"),require("reselect"),require("redux-act"),require("redux"),require("prop-types"),require("ajv")):"function"==typeof define&&define.amd?define("SFR",["react","recompose","immutable","fx-schema-form-core","react-redux","resolve-pathname","reselect","redux-act","redux","prop-typese","ajv"],t):"object"==typeof exports?exports.SFR=t(require("react"),require("recompose"),require("immutable"),require("fx-schema-form-core"),require("react-redux"),require("resolve-pathname"),require("reselect"),require("redux-act"),require("redux"),require("prop-types"),require("ajv")):e.SFR=t(e.React,e.recompose,e.Immutable,e.SFC,e["react-redux"],e["resolve-pathname"],e.reselect,e["redux-act"],e.Redux,e["prop-types"],e.Ajv)}("undefined"!=typeof self?self:this,function(e,t,r,n,o,a,i,c,u,s,f){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=15)}([function(t,r){t.exports=e},function(e,t,r){"use strict";r.d(t,"a",function(){return n});var n={hoc:"hoc",widget:"widget",template:"temp",field:"field"}},function(e,r){e.exports=t},function(e,t){e.exports=r},function(e,t,r){"use strict";r.d(t,"b",function(){return i}),r.d(t,"a",function(){return c}),r.d(t,"c",function(){return u});var n=r(5),o=(r.n(n),r(17)),a=r(32),i=new n.BaseFactory,c=new n.BaseFactory,u=new n.BaseFactory;o.a.forEach(function(e){c.add(e.name,e.hoc(c))}),i.add("schemaForm",a.a)},function(e,t){e.exports=n},function(e,t,r){e.exports=r(20)},function(e,t,r){"use strict";var n=r(3),o=(r.n(n),"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e});t.a=function e(t,r,a){if(!a||"object"===(void 0===a?"undefined":o(a))&&0===Object.keys(a).length)return n.Iterable.isIterable(t)&&!n.Stack.isStack(t)?t.mergeDeep(r):r;var i=void 0===a?"undefined":o(a);if("string"===i||"function"===i)return function(e,t,r){if("function"==typeof r)return r(e,t);switch(r){case"replace":return t;case"append":if(!n.Iterable.isIterable(e))throw new Error('Non-iterable passed to "append" merge function');return e.concat(t);case"prepend":if(!n.Iterable.isIterable(t))throw new Error('Non-iterable passed to "prepend" merge function');return t.concat(e);case"union":if(n.Map.isMap(e))return e.merge(t);if(!n.Iterable.isIterable(e))throw new Error('Non-iterable passed to "union" merge function');return function(e,t,r){var n=e.constructor.name;return"Set"===n||"OrderedSet"===n?e[r](t):e.toOrderedSet()[r](t)["to"+n]()}(e,t,"union");default:throw new Error('Unknown merge function "'+r+'"')}}(t,r,a);if("object"!==i)throw new Error("Invalid schema");if(!n.Iterable.isIterable(t)||!n.Iterable.isIterable(r))throw new Error("Only immutable iterables can be merged using merge schema");if(n.Set.isSet(t)||n.Set.isSet(r)||n.Stack.isStack(t)||n.Stack.isStack(r))throw new Error("Sets and Stacks can't be merged with schema");t.constructor.name;var c=void 0;if(n.List.isList(t))c=Object(n.List)([]);else if(n.Map.isMap(t))c=Object(n.Map)({});else{if(!n.OrderedMap.isOrderedMap(t))throw new Error("Unsupported type");c=Object(n.OrderedMap)({})}return t.forEach(function(n,o){if(r.has(o)){var i=a?a[o]||a["*"]:void 0;c=c.set(o,e(t.get(o),r.get(o),i))}else c=c.set(o,t.get(o))}),r.forEach(function(e,n){t.has(n)||(c=c.set(n,r.get(n)))}),c}},function(e,t,r){"use strict";r.d(t,"a",function(){return n});var n=function(){return!1}},function(e,t,r){"use strict";var n=r(36),o=r(14);r.d(t,"a",function(){return n.a}),n.a.propTypes=Object.assign({},o.a)},function(e,t){e.exports=o},function(e,t,r){"use strict";r.d(t,"a",function(){return n}),r.d(t,"b",function(){return o});var n="data",o="meta"},function(e,t,r){"use strict";r.d(t,"a",function(){return n});var n=function(){function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.key=t,this.value=r,this.parent=n,this.children=[]}return e.prototype.addChild=function(t,r){var n=this,o=null;if(!t.length)return this;for(t=[].concat(t);t.length;){var a=t.shift(),i=a.constructor===Number;(o=n.contains(a))||(i?(o=new e("-",null,n),n.children[a]=o):(o=new e(a.toString(),null,n),n.children.push(o))),n=o}return o&&(o.value=r),o},e.prototype.getKey=function(){return this.key&&"-"!==this.key?this.key:this.getIndexInParent().toString()},e.prototype.getCurrentKeys=function(){var e=[];return this.parent&&(e=e.concat(this.parent.getCurrentKeys())),e.concat([this.key])},e.prototype.getIndexInParent=function(){if(this.parent)for(var e=this.parent.children,t=0,r=e.length;t<r;t++){var n=e[t];if(n&&n===this)return t}return-1},e.prototype.contains=function(t){if(t.constructor===Number){if(this.children.length>t){var r=this.children[t];return r||(this.children[t]=new e("-",null,this),r=this.children[t]),r}return null}if(this.getKey()===t)return this;if(!this.children||0===this.children.length)return null;for(var n=0;n<this.children.length;n++){var o=this.children[n];if(o&&o.contains(t))return o}return null},e.prototype.containPath=function(e){var t=this;return e.forEach(function(e){return t&&(t=t.contains(e))?void 0:null}),t},e.prototype.removeFromParent=function(){var e=this.getIndexInParent();this.parent&&this.parent.children.splice(e,1)},e.prototype.insertToFromParent=function(e){var t=this.getIndexInParent(),r=e;!this.parent||!this.parent.children||t<0||(this.parent.children.length<=e&&this.parent.addChild([e]),this.removeFromParent(),this.parent.children=this.parent.children.concat([]).splice(0,r-0).concat([this]).concat(this.parent.children.splice(r-0)))},e.prototype.forEach=function(e){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&(this.value=e(this)),this.children)for(var t=0,r=this.children.length;t<r;t++)this.children[t]&&(this.children[t].value=e(this.children[t]),this.children[t].forEach(e))},e}()},function(e,t,r){"use strict";var n=r(38),o=r(14);r.d(t,"a",function(){return n.a}),n.a.propTypes=Object.assign({},o.a)},function(e,t,r){"use strict";r.d(t,"a",function(){return a});var n=r(41),o=r.n(n),a={schemaId:o.a.string.isRequired,uiSchema:o.a.object,parentKeys:o.a.array.isRequired,globalOptions:o.a.object.isRequired,ajv:o.a.object.isRequired,arrayIndex:o.a.number,arrayLevel:o.a.array,formItemData:o.a.any,formItemMeta:o.a.any,ArrayItemComponent:o.a.any}},function(e,t,r){e.exports=r(16)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(5),o=(r.n(n),r(4)),a=r(35),i=r(1),c=r(42),u=r(12),s=r(46),f=r(7),p={tempFactory:new n.BaseFactory,fieldFactory:new n.BaseFactory,widgetFactory:new n.BaseFactory};c.a.forEach(function(e){for(var t in e)e.hasOwnProperty(t)&&p.fieldFactory.add(t,e[t])}),o.c.add("default",p),o.a.add(s.b,s.a.bind(s.a,o.a)),t.default={themeFactory:o.c,defaultTheme:p,schemaFormDec:s.a,TreeMap:u.a,reducerFactory:o.b,SchemaForm:a.a,hocFactory:o.a,schemaFormTypes:i.a,merge:f.a}},function(e,t,r){"use strict";r.d(t,"a",function(){return h});var n=r(18),o=r(19),a=r(23),i=r(24),c=r(25),u=r(26),s=r(27),f=r(28),p=r(29),l=r(31),h=[n.a,o.a,a.a,i.a,c.a,u.a,s.a,f.a,p.a,l.a]},function(e,t,r){"use strict";var n=r(0),o=r.n(n),a=r(5);r.n(a);var i=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&(r[n[o]]=e[n[o]])}return r};t.a={name:"merge",hoc:function(e){return function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0],function(e){return function(t){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,t.call(this,e)),o=e.uiSchema?Object.assign({},e.uiSchema):void 0;o&&(o.keys=o.originKeys);var i=new a.MergeLib(e.ajv,e.schemaId,o,e.uiSchemas);return n._mergeUiSchemaList=i.mergeUiSchemaList.map(function(e){return n.mergeKeys(e)}),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,t),r.prototype.mergeKeys=function(e){var t=this.props.arrayLevel,r=(void 0===t?[]:t).concat([]);return(e=Object.assign({},e)).originKeys=[].concat(e.keys),e.keys=e.keys.reverse().map(function(e){return"-"===e?r.pop():e}),e.keys.reverse(),e},r.prototype.render=function(){var t=this.props,r=(t.uiSchemas,t.uiSchema,i(t,["uiSchemas","uiSchema"]));return o.a.createElement(e,Object.assign({mergeSchemaList:this._mergeUiSchemaList},r))},r}(n.PureComponent)}}}}},function(e,t,r){"use strict";var n=r(6),o=r.n(n),a=r(0),i=r.n(a),c=r(5),u=(r.n(c),r(3)),s=r.n(u),f=r(22),p=r.n(f),l=r(1),h=r(7),y=r(4);var m=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,a){function i(e){try{u(n.next(e))}catch(e){a(e)}}function c(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){e.done?o(e.value):new r(function(t){t(e.value)}).then(i,c)}u((n=n.apply(e,t||[])).next())})},d=function(e,t){var r=t.replace(/^\//g,"").split("/");return r=r.map(function(t,n){if(Number.isInteger(+t)){var o=r.slice(0,n);if(o.unshift(e),c.schemaKeysFactory.has(o.join("/")))if("array"===c.schemaFieldFactory.get(c.schemaKeysFactory.get(o.join("/"))).type)return+t}return t})};t.a={name:"utils",hoc:function(e){return function(){return function(e){return function(t){function r(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,t.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,t),r.prototype.render=function(){return i.a.createElement(e,Object.assign({getTitle:this.getTitle,getPathKeys:this.getPathKeys,getOptions:this.getOptions,normalizeDataPath:d,getRequiredKeys:this.getRequiredKeys,getDefaultData:this.getDefaultData,getActions:this.getActions,getPathProps:this.getPathProps},this.props))},r.prototype.getPathProps=function(e,t){return Object.assign({},e,{uiSchema:Object.assign({},e.uiSchema,{keys:e.getPathKeys(e.uiSchema.keys,t)})})},r.prototype.getActions=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=y.b.get(e.reducerKey||"schemaForm").actions;if(t)for(var n in r)if(r.hasOwnProperty(n)){var o=r[n];r[n]=o.raw}return r},r.prototype.getRequiredKeys=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n={};return t&&t.constructor===Array&&t.length?t.forEach(function(t){e.hasOwnProperty(t)&&(n[t]=e[t])}):n=Object.assign({},e),r&&r.constructor===Array&&r.length&&r.forEach(function(e){n.hasOwnProperty(e)&&delete n[e]}),n},r.prototype.getOptions=function(e,t,r){var n=e.uiSchema,o=void 0===n?{}:n,a=e.globalOptions,i=o.options,c=o.type,f=void 0===c?"":c,p=[],y=function(e,t){e&&(s.a.Map.isMap(e)||(e=s.a.fromJS(e)),e.hasIn(t)&&p.push(e.getIn(t)))};y(a,[t,"default"]),y(a,[t,r]),y(a,[l.a.field,f.toString(),"options",t,r]),y(i,[t,r]);for(var m=arguments.length,d=Array(m>3?m-3:0),b=3;b<m;b++)d[b-3]=arguments[b];return(p=p.concat(d)).reverse().reduce(function(e,t){return t?(s.a.Map.isMap(t)||(t=Object(u.fromJS)(t)),Object(h.a)(t,e,{"*":"replace"})):e},Object(u.fromJS)({})).toJS()},r.prototype.getTitle=function(e){for(var t=e.uiSchema,r=e.arrayIndex,n=t.title,o=t.keys,a=arguments.length,i=Array(a>1?a-1:0),c=1;c<a;c++)i[c-1]=arguments[c];if(!n&&i&&i.length&&i.forEach(function(e){e&&!n&&e.get("title")&&(n=e.get("title"))}),void 0!==n)return n;if(o&&o.length){var u=[].concat(o).pop();return void 0!==u?u.toString():""}return r?r.toString():""},r.prototype.getPathKeys=function(e,t,r){var n=[""].concat(e.concat([""])),o=p()(t,n.join("/")).split("/");return o.shift(),o.length&&!o[o.length-1]&&o.pop(),r&&(o=d(Object(c.getSchemaId)(r),o.join("/"))),o},r.prototype.getDefaultData=function(e,t,r,n){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return m(this,void 0,void 0,o.a.mark(function i(){var c,s,f;return o.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return c={},s=t.type,f=function(e){if(!a)return c.defaultData;var t=Object(h.a)(Object(u.fromJS)(c.defaultData),Object(u.fromJS)(e));return n?Object(h.a)(t,Object(u.fromJS)(n)):t.toJS()},o.prev=1,o.next=4,e.validate({type:"object",properties:{defaultData:t}},c);case 4:o.next=9;break;case 6:return o.prev=6,o.t0=o.catch(1),o.abrupt("return",r);case 9:o.prev=9,o.t1=s,o.next="object"===o.t1?13:"array"===o.t1?16:19;break;case 13:return c.defaultData||(c.defaultData=r||{}),c.defaultData=f(r||{}),o.abrupt("break",20);case 16:return c.defaultData||(c.defaultData=r||[]),c.defaultData=f(r||[]),o.abrupt("break",20);case 19:c.defaultData=r||c.defaultData;case 20:return o.finish(9);case 21:return o.abrupt("return",c.defaultData);case 22:case"end":return o.stop()}},i,this,[[1,6,9,21]])}))},r}(a.PureComponent)}}}}},function(e,t,r){var n=function(){return this}()||Function("return this")(),o=n.regeneratorRuntime&&Object.getOwnPropertyNames(n).indexOf("regeneratorRuntime")>=0,a=o&&n.regeneratorRuntime;if(n.regeneratorRuntime=void 0,e.exports=r(21),o)n.regeneratorRuntime=a;else try{delete n.regeneratorRuntime}catch(e){n.regeneratorRuntime=void 0}},function(e,t){!function(t){"use strict";var r,n=Object.prototype,o=n.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag",s="object"==typeof e,f=t.regeneratorRuntime;if(f)s&&(e.exports=f);else{(f=t.regeneratorRuntime=s?e.exports:{}).wrap=O;var p="suspendedStart",l="suspendedYield",h="executing",y="completed",m={},d={};d[i]=function(){return this};var b=Object.getPrototypeOf,v=b&&b(b(K([])));v&&v!==n&&o.call(v,i)&&(d=v);var g=S.prototype=j.prototype=Object.create(d);I.prototype=g.constructor=S,S.constructor=I,S[u]=I.displayName="GeneratorFunction",f.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===I||"GeneratorFunction"===(t.displayName||t.name))},f.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,S):(e.__proto__=S,u in e||(e[u]="GeneratorFunction")),e.prototype=Object.create(g),e},f.awrap=function(e){return{__await:e}},x(P.prototype),P.prototype[c]=function(){return this},f.AsyncIterator=P,f.async=function(e,t,r,n){var o=new P(O(e,t,r,n));return f.isGeneratorFunction(t)?o:o.next().then(function(e){return e.done?e.value:o.next()})},x(g),g[u]="Generator",g[i]=function(){return this},g.toString=function(){return"[object Generator]"},f.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},f.values=K,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(C),!e)for(var t in this)"t"===t.charAt(0)&&o.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=r)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,o){return c.type="throw",c.arg=e,t.next=n,o&&(t.method="next",t.arg=r),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=o.call(i,"catchLoc"),s=o.call(i,"finallyLoc");if(u&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),C(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;C(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:K(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=r),m}}}function O(e,t,r,n){var o=t&&t.prototype instanceof j?t:j,a=Object.create(o.prototype),i=new k(n||[]);return a._invoke=function(e,t,r){var n=p;return function(o,a){if(n===h)throw new Error("Generator is already running");if(n===y){if("throw"===o)throw a;return R()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=E(i,r);if(c){if(c===m)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===p)throw n=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=h;var u=w(e,t,r);if("normal"===u.type){if(n=r.done?y:l,u.arg===m)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n=y,r.method="throw",r.arg=u.arg)}}}(e,r,i),a}function w(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}function j(){}function I(){}function S(){}function x(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function P(e){var t;this._invoke=function(r,n){function a(){return new Promise(function(t,a){!function t(r,n,a,i){var c=w(e[r],e,n);if("throw"!==c.type){var u=c.arg,s=u.value;return s&&"object"==typeof s&&o.call(s,"__await")?Promise.resolve(s.__await).then(function(e){t("next",e,a,i)},function(e){t("throw",e,a,i)}):Promise.resolve(s).then(function(e){u.value=e,a(u)},i)}i(c.arg)}(r,n,t,a)})}return t=t?t.then(a,a):a()}}function E(e,t){var n=e.iterator[t.method];if(n===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=r,E(e,t),"throw"===t.method))return m;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var o=w(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,m;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=r),t.delegate=null,m):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,m)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function K(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function t(){for(;++n<e.length;)if(o.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=r,t.done=!0,t};return a.next=a}}return{next:R}}function R(){return{value:r,done:!0}}}(function(){return this}()||Function("return this")())},function(e,t){e.exports=a},function(e,t,r){"use strict";var n=r(0),o=r.n(n),a=r(4);t.a={name:"theme",hoc:function(e){return function(){return function(e){return function(t){function r(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,t.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,t),r.prototype.render=function(){var t=this.props.uiSchema.theme,r=void 0;if(!a.c.has(t||"default"))throw new Error("没有找到"+(t||"default")+"的样式！");return r=a.c.get(t||"default"),o.a.createElement(e,Object.assign({currentTheme:r},this.props))},r}(n.PureComponent)}}}}},function(e,t,r){"use strict";var n=r(0),o=r.n(n),a=r(8);t.a={name:"field",hoc:function(e){return function(){return function(e){return function(t){function r(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,t.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,t),r.prototype.render=function(){var t=this.props,r=t.currentTheme,n=(t.getOptions,t.uiSchema),i=n.field,c=n.widget,u=n.type,s=void 0,f=void 0,p=i||u,l=c||u;if(r.fieldFactory.has(p))s=r.fieldFactory.get(p);else{if(!r.fieldFactory.has("default"))return Object(a.a)()||console.error("找不到field："+p),null;s=r.fieldFactory.get("default")}return r.widgetFactory.has(l)?f=r.widgetFactory.get(l):r.widgetFactory.has("default")?f=r.widgetFactory.get("default"):Object(a.a)()||console.warn("找不到widget："+l,n),o.a.createElement(e,Object.assign({},this.props,{FieldComponent:s,WidgetComponent:f}))},r}(n.PureComponent)}}}}},function(e,t,r){"use strict";var n=r(6),o=r.n(n),a=r(0),i=r.n(a),c=r(2),u=(r.n(c),this),s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h=this&&this.__decorate||function(e,t,r,n){var o,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":s(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(a<3?o(i):a>3?o(t,r,i):o(t,r))||i);return a>3&&i&&Object.defineProperty(t,r,i),i},y=this&&this.__metadata||function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":s(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},m=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,a){function i(e){try{u(n.next(e))}catch(e){a(e)}}function c(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){e.done?o(e.value):new r(function(t){t(e.value)}).then(i,c)}u((n=n.apply(e,t||[])).next())})},d=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&(r[n[o]]=e[n[o]])}return r};t.a={name:"array",hoc:function(e){return function(){var e=Object(c.compose)(Object(c.withHandlers)({addItem:function(e){return function(t,r){return m(u,void 0,void 0,o.a.mark(function n(){var a,i,c,u,s;return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(t.uiSchema&&t.uiSchema.items){n.next=2;break}return n.abrupt("return");case 2:return a=t.uiSchema,i=a.items,c=a.keys,u=a.defaultData,n.next=5,t.getDefaultData(t.ajv,i,r,u,!0);case 5:s=n.sent,e.getActions(e).addItem({parentKeys:t.parentKeys,keys:c,data:s});case 7:case"end":return n.stop()}},n,this)}))}},removeItem:function(e){return function(t,r,n){e.getActions(e).removeItem({parentKeys:t,keys:r,index:n})}},moveItem:function(e){return function(t,r,n,o){e.getActions(e).moveToItem({parentKeys:t,keys:r,curIndex:n,toIndex:o})}},initArrayComponent:function(e){return function(e,t){var r=e.ArrayComponent,n=e.ArrayItemComponent,o=d(e,["ArrayComponent","ArrayItemComponent"]);return"array"===e.uiSchema.type?r?i.a.createElement(r,Object.assign({},o)):null:n?i.a.createElement(n,Object.assign({},o)):null}}}));return Object(c.branch)(function(e){var t=e.uiSchema;return"array"===(void 0===t?{type:""}:t).type},function(t){var r=function(e){function r(t,n){f(this,r);var o=p(this,e.call(this,t,n));return o.initArrayComponents(),o}return l(r,e),r.prototype.initArrayComponents=function(){var e=(0,this.props.getOptions)(this.props,"hoc","array");e.ArrayComponent&&(this.ArrayComponent=e.ArrayComponent),e.ArrayItemComponent&&(this.ArrayItemComponent=e.ArrayItemComponent)},r.prototype.render=function(){var e={};return this.ArrayComponent&&(e.ArrayComponent=this.ArrayComponent),this.ArrayItemComponent&&(e.ArrayItemComponent=this.ArrayItemComponent),i.a.createElement(t,Object.assign({},this.props,e))},r}(a.PureComponent);return r=h([e,y("design:paramtypes",[Object,Object])],r)},function(t){var r=function(e){function r(){return f(this,r),p(this,e.apply(this,arguments))}return l(r,e),r.prototype.render=function(){return i.a.createElement(t,Object.assign({},this.props))},r}(i.a.PureComponent);return r=h([e],r)})}}}},function(e,t,r){"use strict";var n=r(6),o=r.n(n),a=r(0),i=r.n(a),c=r(2),u=(r.n(c),r(5)),s=(r.n(u),this),f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var p=this&&this.__decorate||function(e,t,r,n){var o,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":f(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(a<3?o(i):a>3?o(t,r,i):o(t,r))||i);return a>3&&i&&Object.defineProperty(t,r,i),i},l=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,a){function i(e){try{u(n.next(e))}catch(e){a(e)}}function c(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){e.done?o(e.value):new r(function(t){t(e.value)}).then(i,c)}u((n=n.apply(e,t||[])).next())})};t.a={name:"validate",hoc:function(e){return function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0],function(t){var r=function(e){function r(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,e),r.prototype.render=function(){return i.a.createElement(t,Object.assign({},this.props))},r}(a.PureComponent);return r=p([Object(c.compose)(e.get("data")({root:!0}),Object(c.withHandlers)({validate:function(e){return function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return l(s,void 0,void 0,o.a.mark(function a(){var i,c,s,f,p,l,h,y,m,d;return o.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(i={dirty:!0,isValid:!1,isLoading:!1},c=t.uiSchema,t.reducerKey,s=t.parentKeys,f=t.ajv,p=t.getTitle,l=Object.assign({},c),h=setTimeout(function(){e.getActions(e).updateItemMeta({parentKeys:s,keys:l.keys,meta:{isLoading:!0,isValid:!1,errorText:!1}})},200),o.prev=4,y=void 0,l.schemaPath&&f.getSchema(l.schemaPath)?y=f.getSchema(l.schemaPath):l.$id?y=f.getSchema(l.$id):(delete(m=Object.assign({},u.schemaFieldFactory.get(l.schemaPath))).$id,delete m.$ref,y=f.compile(m)),!e.formItemData){o.next=13;break}return o.next=10,y(r,void 0,void 0,void 0,e.formItemData.toJS());case 10:i.isValid=o.sent,o.next=16;break;case 13:return o.next=15,y(r);case 15:i.isValid=o.sent;case 16:if(i.isValid){o.next=20;break}throw(d=new Error).errors=y.errors,d;case 20:o.next=25;break;case 22:o.prev=22,o.t0=o.catch(4),i.errorText=o.t0.errors?f.errorsText(o.t0.errors,{dataVar:p(t).toString()}):o.t0.message;case 25:return o.prev=25,clearTimeout(h),o.finish(25);case 28:return o.abrupt("return",Object.assign({},n,i));case 29:case"end":return o.stop()}},a,this,[[4,22,25,28]])}))}}}),e.get("resetKey")({excludeKeys:["formItemData"]}),Object(c.withHandlers)({updateItemData:function(e){return function(t,r,n,o){var a=r.parentKeys,i=r.uiSchema;return e.getActions(e,t).updateItemData({parentKeys:a,keys:i.keys,data:n,meta:o})}},updateItemMeta:function(e){return function(t,r,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return l(s,void 0,void 0,o.a.mark(function c(){var u,s;return o.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(u=r.parentKeys,s=r.uiSchema,o.t0=e.getActions(e,t),o.t1=u,o.t2=s.keys,o.t3=a,o.t3){o.next=9;break}return o.next=8,e.validate(r,n);case 8:o.t3=o.sent;case 9:return o.t4=o.t3,o.t5=i,o.t6={parentKeys:o.t1,keys:o.t2,meta:o.t4,noChange:o.t5},o.abrupt("return",o.t0.updateItemMeta.call(o.t0,o.t6));case 13:case"end":return o.stop()}},c,this)}))}},removeItemData:function(e){return function(t,r){var n=r.parentKeys,o=r.uiSchema,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return e.getActions(e,t).removeItemData({parentKeys:n,keys:o.keys,meta:a})}},combineActions:function(e){return function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return e.getActions(e).combineActions(r)}}}),Object(c.withHandlers)({updateItemData:function(e){return e.updateItemData.bind(null,!1)},updateItemMeta:function(e){return e.updateItemMeta.bind(null,!1)},removeItemData:function(e){return e.removeItemData.bind(null,!1)},updateItemDataRaw:function(e){return e.updateItemData.bind(null,!0)},updateItemMetaRaw:function(e){return e.updateItemMeta.bind(null,!0)},removeItemDataRaw:function(e){return e.removeItemData.bind(null,!0)}}))],r)}}}}},function(e,t,r){"use strict";var n=r(0),o=r.n(n),a=r(2),i=(r.n(a),r(3)),c=r.n(i),u=r(1);t.a={name:"make",hoc:function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(r){return function(n){function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,n.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,n),i.prototype.render=function(){var n=this.props,i=n.uiSchema,s=n.getOptions,f=i.type,p=i.field,l=s(this.props,u.a.field,p||f,c.a.fromJS(i.hocs?{hocs:i.hocs}:{}),c.a.fromJS(t||{})).hocs||["utils","theme","field","validate","array","temp"],h=a.compose.apply(void 0,[].concat(l).map(function(t){return"string"!=typeof t?t:e.get(t)()}))(r);return o.a.createElement(h,Object.assign({},this.props))},i}(n.PureComponent)}}}}},function(e,t,r){"use strict";var n=r(0),o=r.n(n),a=r(2),i=(r.n(a),r(1));t.a={name:"temp",hoc:function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{tempField:"temps",templates:[]};return function(r){return function(n){function c(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,n.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(c,n),c.prototype.render=function(){var t=this,n=this.props,c=n.uiSchema,u=n.getOptions,s=n.reducerKey;return c.options,c.keys,this.getTemplates().reduce(function(r,n){var c=n.key,f=n.Temp,p=u(t.props,i.a.template,c),l=a.compose.apply(void 0,[e.get("utils")()].concat(p.tempHocs||[]))(f);return o.a.createElement(l,{tempKey:c,ajv:t.props.ajv,uiSchema:t.props.uiSchema,schemaId:t.props.schemaId,arrayLevel:t.props.arrayLevel,reducerKey:s,arrayIndex:t.props.arrayIndex,globalOptions:t.props.globalOptions,ArrayComponent:t.props.ArrayComponent,ArrayItemComponent:t.props.ArrayItemComponent,initArrayComponent:t.props.initArrayComponent,parentKeys:t.props.parentKeys,children:r})},o.a.createElement(r,Object.assign({},this.props)))},c.prototype.getTemplates=function(){var e=this.props,r=e.uiSchema,n=e.currentTheme,o=e.getOptions,a=(r.keys,r.type),c=r.temps,u=o(this.props,i.a.field,a),s=[],f=void 0;return function e(t){switch(t.constructor){case String:n.tempFactory.has(t)?s.push({key:t,Temp:n.tempFactory.get(t)}):console.error("不存在"+t+"的temp！");break;case Object:s.push({key:t.name,Temp:t});break;case Array:[].concat(f).reverse().forEach(function(t,r){e(t)})}}(f=c||(t.templates&&t.templates.length>0?t.templates:u[t.tempField]||"default")),s},c}(n.PureComponent)}}}}},function(e,t,r){"use strict";var n=r(0),o=r.n(n),a=r(10),i=(r.n(a),r(30)),c=(r.n(i),r(3)),u=r.n(c),s=r(1);var f=Object(i.createSelectorCreator)(i.defaultMemoize,c.is),p="data";t.a={name:p,hoc:function(e){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:!0},t=function(t,r,n){return f([function(o){var a=[].concat(r,t,["data"]);if(e.root)return o.getIn(a);if(a=[].concat(a,n),e.data&&o.hasIn(a)){var i=o.getIn(a);if(void 0!==i)return e.dataLength?u.a.List.isList(i)?i.size:0:i}},function(o){var a=[].concat(r,t,["meta"]);if(e.meta&&o.hasIn(a)){var i=o.getIn(a).containPath([].concat(n));if(i&&i.value)return e.metaKeys?i.value.filter(function(t,r){return e.metaKeys.indexOf(r)>=0}):i.value}},function(o){if(!e.treeNode)return null;var a=[].concat(r,t,["meta"]),i=o.getIn(a),c=i.containPath([].concat(n));return c||i.addChild([].concat(n))}],function(e,t,r){var n={};return void 0!==e&&null!==e&&(n.formItemData=e),void 0!==t&&null!==t&&(n.formItemMeta=t),void 0!==r&&null!==r&&(n.formItemNode=r),n})};return function(e){return function(r){function n(o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,r.call(this,o));i.ComponentWithHoc=e;var c=i.props,u=(c.uiSchema,c.getOptions),f=(i.props.uiSchema||{}).keys,l=void 0===f?[]:f,h=u(i.props,s.a.hoc,p);return h.rootReducerKey&&h.rootReducerKey.constructor===Array?i.ComponentWithHoc=Object(a.connect)(t(i.props.parentKeys,h.rootReducerKey,l))(e):console.error("dataHoc missing property rootReducerKey.should be a Array."),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,r),n.prototype.render=function(){var e=this.ComponentWithHoc;return o.a.createElement(e,Object.assign({},this.props))},n}(n.PureComponent)}}}}},function(e,t){e.exports=i},function(e,t,r){"use strict";var n=r(0),o=r.n(n),a=r(3),i=(r.n(a),r(1));t.a={name:"resetKey",hoc:function(e){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{excludeKeys:[],includeKeys:[]};return function(t){return function(r){function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,r.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,r),n.prototype.render=function(){var r=this.props,n=r.getOptions,c=r.getRequiredKeys,u=n(this.props,i.a.hoc,"resetKey",Object(a.fromJS)(e||{})),s=c(this.props,u.includeKeys,u.excludeKeys);return o.a.createElement(t,Object.assign({},s))},n}(o.a.PureComponent)}}}}},function(e,t,r){"use strict";r.d(t,"a",function(){return o});var n=r(3),o=(r.n(n),new(r(33).a)(Object(n.fromJS)({})))},function(e,t,r){"use strict";r.d(t,"a",function(){return p});var n=r(34),o=(r.n(n),r(3)),a=(r.n(o),r(11)),i=r(12),c=r(7),u=r(8),s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var f=function(e,t){if(e.hasIn(t))return e;for(var r=0,n=t.length;r<n;r++){var a=[].concat(t).splice(0,r+1);if(e.hasIn(a)){if(r<n){var i=e.getIn(a);o.Map.isMap(i)||o.List.isList(i)||(e=t[r+1].constructor===Number?e.setIn(a,Object(o.List)()):e.setIn(a,Object(o.Map)()))}}else a.pop(),e.hasIn(a)||(e=t[r].constructor===Number?e.setIn(a,Object(o.List)()):e.setIn(a,Object(o.Map)()))}return e},p=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initialState=t,this.createForm=Object(n.createAction)(Object(u.a)()?"":"创建一个表单数据"),this.updateItemData=Object(n.createAction)(Object(u.a)()?"":"更新一个表单数据"),this.updateItemMeta=Object(n.createAction)(Object(u.a)()?"":"更新一个表单元数据"),this.addItem=Object(n.createAction)(Object(u.a)()?"":"添加一个数据"),this.removeItem=Object(n.createAction)(Object(u.a)()?"":"删除一个数据"),this.moveToItem=Object(n.createAction)(Object(u.a)()?"":"元素移位"),this.removeItemData=Object(n.createAction)(Object(u.a)()?"":"删除一个字段的数据以及meta数据"),this.combineActions=Object(n.createAction)(Object(u.a)()?"":"合并多个action"),this.removeForm=Object(n.createAction)(Object(u.a)()?"":"清除一个form的数据")}return e.prototype.init=function(e){for(var t in this.actions)if(this.actions.hasOwnProperty(t)){var r=this.actions[t];r.assigned()||r.assignTo(e)}},e.prototype.removeFormHandle=function(e,t){var r=t;return e.hasIn(r)?e.removeIn(r):e},e.prototype.combineActionsHandle=function(e,t){var r=this;return e=t.reduce(function(e,t){return r.reducer(e,t)},e)},e.prototype.removeItemDataMetaHandle=function(e,t){var r=t.parentKeys,n=t.keys,o=t.meta,i=r.concat([a.a].concat(n)),c=r.concat([a.b]),u=e.getIn(c).containPath(n);return(e=f(e,i)).hasIn(i)&&(e=e.removeIn(i)),u&&o&&u.removeFromParent(),e},e.prototype.createFormHandle=function(e,t){var r=t.key,n=t.data;e.has(r)&&(e=e.remove(r));var a=new i.a(r,Object(o.fromJS)({})),c=Object(o.Map)({meta:a,data:Object(o.fromJS)(n)});return e.set(r,c)},e.prototype.updateItemDataHandle=function(e,t){var r=t.parentKeys,n=t.keys,i=t.data,c=t.meta,u=r.concat([a.a].concat(n));return e=(e=f(e,u)).setIn(u,Object(o.fromJS)(i)),c&&(e=this.updateItemMetaHandle(e,{parentKeys:r,keys:n,meta:c})),e},e.prototype.addItemDataHandle=function(e,t){var r=t.parentKeys,n=t.keys,i=t.data,c=r.concat([a.a].concat(n)),u=r.concat([a.b]),s=e.getIn(u).containPath(n),p=void 0;return p=(p=(e=f(e,c)).getIn(c)||Object(o.List)()).push(Object(o.fromJS)(i)),s&&s.value&&(s.value=s.value.merge({collapsing:!1})),e.setIn(c,p)},e.prototype.removeItemHandle=function(e,t){var r=t.parentKeys,n=t.keys,i=t.index,c=r.concat([a.a].concat(n)),u=r.concat([a.b]),s=e.getIn(u).addChild(n.concat([i])),p=void 0;return(p=(e=f(e,c)).getIn(c))&&o.List.isList(p)?(s&&s.removeFromParent(),e.setIn(c,p.remove(i))):e},e.prototype.moveItemHandle=function(e,t){var r=t.parentKeys,n=t.keys,o=t.curIndex,i=t.toIndex,c=r.concat([a.a].concat(n)),u=r.concat([a.b]),s=e.getIn(u),p=(e.getIn(c),e.getIn(c)),l=s.containPath(n.concat([o])),h=s.containPath(n.concat([i]));if(e=f(e,c),!p||i<0)return e;var y=p.get(o);return p=(p=p.remove(o)).insert(i-0,y),l?l.insertToFromParent(i):h&&h.insertToFromParent(o),e.setIn(c,p)},e.prototype.updateItemMetaHandle=function(e,t){var r=t.parentKeys,n=t.keys,u=t.meta,s=t.noChange,f=r.concat([a.b]),p=e.getIn(f),l=p.containPath(n),h=l?l.value:null;if(l||(l=p.addChild(n)),l&&(l.value=h?Object(c.a)(l.value,Object(o.fromJS)(u),{"*":"replace"}):Object(o.fromJS)(u)),s)return e;var y=new i.a(p.getKey(),p.value);return y.children=p.children,e.setIn(f,y)},s(e,[{key:"actions",get:function(){return{createForm:this.createForm,updateItemData:this.updateItemData,updateItemMeta:this.updateItemMeta,addItem:this.addItem,removeItem:this.removeItem,moveToItem:this.moveToItem,removeItemData:this.removeItemData,combineActions:this.combineActions,removeForm:this.removeForm}}},{key:"reducer",get:function(){var e;return Object(n.createReducer)(((e={})[this.createForm]=this.createFormHandle.bind(this),e[this.updateItemData]=this.updateItemDataHandle.bind(this),e[this.updateItemMeta]=this.updateItemMetaHandle.bind(this),e[this.addItem]=this.addItemDataHandle.bind(this),e[this.removeItem]=this.removeItemHandle.bind(this),e[this.moveToItem]=this.moveItemHandle.bind(this),e[this.removeItemData]=this.removeItemDataMetaHandle.bind(this),e[this.combineActions]=this.combineActionsHandle.bind(this),e[this.removeForm]=this.removeFormHandle.bind(this),e),this.initialState)}}]),e}()},function(e,t){e.exports=c},function(e,t,r){"use strict";var n=r(9);r.d(t,"a",function(){return n.a});r(13)},function(e,t,r){"use strict";r.d(t,"a",function(){return f});var n=r(0),o=r.n(n),a=r(37),i=r(13),c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var u=this&&this.__decorate||function(e,t,r,n){var o,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":c(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var u=e.length-1;u>=0;u--)(o=e[u])&&(i=(a<3?o(i):a>3?o(t,r,i):o(t,r))||i);return a>3&&i&&Object.defineProperty(t,r,i),i},s=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&(r[n[o]]=e[n[o]])}return r},f=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){var e=this.props,t=e.schemaId,r=e.mergeSchemaList,n=e.arrayLevel,a=e.RootComponent,c=e.children,u=s(e,["schemaId","mergeSchemaList","arrayLevel","RootComponent","children"]),f=r?r.map(function(e,r){var a=n?n.concat([]):[];return o.a.createElement(i.a,Object.assign({key:r},u,{schemaId:t,uiSchema:e,arrayLevel:a}))}):[];return a?o.a.createElement(a,null,f,c):o.a.createElement("div",null,f,c)},t}(n.PureComponent);f=u([a.a],f)},function(e,t,r){"use strict";r.d(t,"a",function(){return a});var n=r(2),o=(r.n(n),r(4)),a=Object(n.compose)(Object(n.shouldUpdate)(function(){return!1}),o.a.get("utils")(),o.a.get("merge")())},function(e,t,r){"use strict";r.d(t,"a",function(){return p});var n=r(0),o=r.n(n),a=r(39),i=(r.n(a),r(40)),c=r(8),u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var s=this&&this.__decorate||function(e,t,r,n){var o,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(a<3?o(i):a>3?o(t,r,i):o(t,r))||i);return a>3&&i&&Object.defineProperty(t,r,i),i},f=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&(r[n[o]]=e[n[o]])}return r},p=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){var e=this.props,t=e.FieldComponent,r=e.uiSchema,n=f(e,["FieldComponent","uiSchema"]),i=n.getOptions(this.props,"field",r.field||r.type),u=t;return t?(i.fieldHocs&&i.fieldHocs.length&&(u=a.compose.apply(void 0,i.fieldHocs||[])(t)),o.a.createElement(u,Object.assign({key:r.keys.join("formItem"),uiSchema:r},n))):(Object(c.a)()||console.warn(r,"没有找到匹配的field"),null)},t}(n.PureComponent);p=s([i.a],p)},function(e,t){e.exports=u},function(e,t,r){"use strict";r.d(t,"a",function(){return a});var n=r(2),o=(r.n(n),r(4)),a=Object(n.compose)(o.a.get("utils")(),o.a.get("make")())},function(e,t){e.exports=s},function(e,t,r){"use strict";var n=r(43),o=r(44),a=r(45);t.a=[n.a,o.a,a.a]},function(e,t,r){"use strict";var n,o=r(0),a=r.n(o),i=r(2),c=(r.n(i),r(1));var u=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&(r[n[o]]=e[n[o]])}return r},s=function(e){function t(r,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,r,n))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){var e=this.props,t=e.WidgetComponent,r=(e.FieldComponent,e.formItemMeta,e.formItemData,u(e,["WidgetComponent","FieldComponent","formItemMeta","formItemData"])),n=r.getOptions(this.props,c.a.field,"normal"),o=r.uiSchema.keys,s=t;return t&&o?(n.widgetHocs&&n.widgetHocs.length&&(s=i.compose.apply(void 0,n.widgetHocs)(t)),a.a.createElement(s,Object.assign({key:o.join(".")},r))):null},t}(o.PureComponent);t.a=((n={}).normal=s,n.default=s,n)},function(e,t,r){"use strict";var n,o=r(0),a=r.n(o),i=r(9),c=r(1),u=r(2);r.n(u);var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){var e=this.props,t=e.arrayIndex,r=e.arrayLevel,n=e.parentKeys,o=e.globalOptions,s=e.ajv,f=(e.schemaId,e.getOptions),p=e.reducerKey,l=e.uiSchema,h=f(this.props,c.a.field,"object"),y=i.a;return null!==l.children&&l.schemaPath?(h.formHocs&&h.formHocs.constructor===Array&&(y=u.compose.apply(void 0,h.formHocs)(i.a)),a.a.createElement(y,{arrayIndex:t,arrayLevel:r,RootComponent:h.Root,reducerKey:p,schemaId:l.schemaPath,uiSchemas:l.children||["*"],uiSchema:l,parentKeys:n,globalOptions:o,ajv:s})):null},t}(o.PureComponent);t.a=((n={}).object=s,n)},function(e,t,r){"use strict";var n,o=r(0),a=r.n(o),i=r(2),c=(r.n(i),r(1)),u=r(9);function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l={width:"100%",height:"100%"},h=function(e){function t(){return s(this,t),f(this,e.apply(this,arguments))}return p(t,e),t.prototype.render=function(){return a.a.createElement("div",{style:l},this.props.children)},t}(a.a.PureComponent),y=function(e){function t(r){s(this,t);var n=f(this,e.call(this,r));return n.SchemaFormWithHoc=h,n.initComponent(),n}return p(t,e),t.prototype.initComponent=function(){var e=this.props,t=(e.uiSchema,e.formItemData,(0,e.getOptions)(this.props,c.a.field,"array")),r=null,n=null;t.formHocs&&t.formHocs.constructor===Array&&(r=i.compose.apply(void 0,t.formHocs)(t.ArrayFieldComponent||h)),t.formItemHocs&&t.formItemHocs.constructor===Array&&(n=i.compose.apply(void 0,t.formItemHocs)(u.a)),this.SchemaFormWithHoc=r,this.SchemaFormItemWithHoc=n},t.prototype.renderItem=function(e){var t=this.props,r=t.parentKeys,n=t.globalOptions,o=t.getOptions,i=t.arrayLevel,s=void 0===i?[]:i,f=(t.getRequiredKeys,t.ajv),p=t.reducerKey,l=t.ArrayItemComponent,h=this.props.uiSchema,y=o(this.props,c.a.field,"array"),m=this.SchemaFormItemWithHoc||u.a;return null!==h.children&&h.schemaPath?a.a.createElement(m,{key:e,arrayIndex:e,uiSchema:h,RootComponent:y.Root,ArrayItemComponent:l,arrayLevel:s.concat([e]),reducerKey:p,schemaId:h.schemaPath,uiSchemas:h.children||["-"],parentKeys:r,globalOptions:n,ajv:f}):null},t.prototype.render=function(){for(var e=this.props,t=(e.uiSchema,e.formItemData),r=e.getOptions,n=e.getRequiredKeys,o=[],i=r(this.props,c.a.field,"array"),u=this.SchemaFormWithHoc,s=i.fieldIncludeKeys,f=i.fieldExcludeKeys,p=n(this.props,s,f),l=0;l<+t;l++)o.push(this.renderItem(l));return a.a.createElement(u,Object.assign({children:o},p))},t}(o.PureComponent);t.a=((n={}).array=y,n)},function(e,t,r){"use strict";r.d(t,"b",function(){return g});var n=r(6),o=r.n(n),a=r(0),i=r.n(a),c=r(2),u=(r.n(c),r(10)),s=(r.n(u),r(3)),f=(r.n(s),r(47)),p=(r.n(f),r(1)),l=r(4),h=r(11),y=this,m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var d=this&&this.__decorate||function(e,t,r,n){var o,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":m(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(a<3?o(i):a>3?o(t,r,i):o(t,r))||i);return a>3&&i&&Object.defineProperty(t,r,i),i},b=this&&this.__metadata||function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":m(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},v=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,a){function i(e){try{u(n.next(e))}catch(e){a(e)}}function c(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){e.done?o(e.value):new r(function(t){t(e.value)}).then(i,c)}u((n=n.apply(e,t||[])).next())})},g="schemaFormDec";t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{rootReducerKey:[],parentKeys:[]};return function(t){var r=function(r){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,r.call(this,e));return t._validateAll=e.validateAll.bind(t),e.resetForm(),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,r),n.prototype.render=function(){var r=this.props,n=(r.errors,r.isValid,r.isValidating,r.getRequiredKeys),o=r.getOptions,a=r.schemaId,c=o(this.props,p.a.hoc,g,Object(s.fromJS)(e||{})),u=n(this.props,c.hocIncludeKeys,c.hocExcludeKeys);return i.a.createElement(t,Object.assign({validateAll:this._validateAll,parentKeys:e.parentKeys,schemaId:a},u))},n}(a.PureComponent);return r=d([Object(c.compose)(l.a.get("utils")(),Object(u.connect)(function(t){var r=e.rootReducerKey.concat(e.parentKeys),n=r.concat([h.a]),o=r.concat([h.b]),a=t.getIn(o);return{data:t.getIn(n),root:a,isValid:!a||a.value.get("isValid"),errors:a?a.value.get("errors"):null,isValidating:!!a&&a.value.get("isLoading")}}),Object(c.withHandlers)({validateAll:function(t){var r=t.getActions(t).updateItemMeta,n=void 0;return function(a){return v(y,void 0,void 0,o.a.mark(function a(){var i,c,u,p,l,h,y;return o.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(i=t.root,c=t.ajv,u=t.data,p=t.ajv.getSchema(t.schemaId),l=Object(s.fromJS)({dirty:!0,isValid:!0,isLoading:!0}),h=Object(s.fromJS)({isLoading:!1,dirty:!0}),y=t.normalizeDataPath,i){o.next=3;break}return o.abrupt("return");case 3:if(p){o.next=5;break}throw new Error("没有找到对应的"+t.schemaId+";");case 5:return o.prev=5,i.forEach(function(e){return e.value?e.value.merge(l):l},!0),n=setTimeout(function(){r({parentKeys:e.parentKeys,keys:[],meta:i.value})},200),(s.Map.isMap(u)||s.List.isList(u))&&(u=u.toJS()),c.errors=null,o.next=12,p(u);case 12:if(o.sent){o.next=14;break}throw new f.ValidationError(p.errors.concat(c.errors||[]));case 14:i.value=i.value.merge({isValid:!0}),r({parentKeys:e.parentKeys,keys:[],meta:i.value}),o.next=24;break;case 18:if(o.prev=18,o.t0=o.catch(5),o.t0 instanceof f.ValidationError){o.next=22;break}return o.abrupt("return",{isValid:!1,errMsg:o.t0.message});case 22:o.t0.errors.forEach(function(e){var r=i.getCurrentKeys().concat(y(t.schemaId,e.dataPath)),n=i.containPath(r);n||(n=i.addChild(r,Object(s.fromJS)({}))),n&&(n.value=n.value.merge(h).merge({isValid:!1,errorText:r.pop()+" "+e.message}))}),i.value=i.value.merge({isValid:!1,errors:o.t0.errors});case 24:return o.prev=24,clearTimeout(n),i.forEach(function(e){return e.value?e.value.merge(h):e.value},!0),r({parentKeys:e.parentKeys,keys:[],meta:i.value}),o.finish(24);case 29:return o.abrupt("return",{isValid:i.value.get("isValid"),data:u});case 30:case"end":return o.stop()}},a,this,[[5,18,24,29]])}))}},resetForm:function(e){return function(){var t=e.formKey,r=e.shouldResetForm,n=(e.reducerKey,e.initData),o=void 0===n?{}:n;if(t&&!1!==r){var a=e.getActions(e).createForm;a&&a({key:t,data:o})}}}})),b("design:paramtypes",[Object])],r)}}},function(e,t){e.exports=f}]).default});
//# sourceMappingURL=index.js.map